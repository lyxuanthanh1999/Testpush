var check=0,CartAjax=function(){function i(){$("body").on("click",".a-delete",function(i){i.preventDefault();var r=$(this).data("id");$.ajax({url:"/Cart/RemoveFromCart",type:"post",data:{courseId:r},success:function(){check--;t();n();check===0&&location.reload()}})});$("#aClearAll").on("click",function(i){i.preventDefault();$.ajax({url:"/Cart/ClearCart",type:"post",success:function(){check=0;t();n();location.reload()}})})}function t(){$("#headerCart").load("/Home/RefreshCart")}function n(){$.ajax({url:"/Cart/GetCart",type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var r=$("#template-cart").html(),t="",i=0,u=0,f="https://localhost:44342";$.each(n,function(n,e){t+=Mustache.render(r,{courseId:e.courseViewModel.id,courseImg:f+e.courseViewModel.image,urlCourseId:"/courses-"+e.courseViewModel.id+".html",courseName:e.courseViewModel.name,urlCategoryId:"/courses.html?categoryId="+e.courseViewModel.categoryId,categoryName:e.courseViewModel.categoryName,ownerUser:e.courseViewModel.createdName,coursePrice:e.price.toLocaleString("vi",{style:"currency",currency:"VND"}),coursePromotionPrice:e.promotionPrice?e.promotionPrice.toLocaleString("vi",{style:"currency",currency:"VND"}):u.toLocaleString("vi",{style:"currency",currency:"VND"})});check++;i+=e.promotionPrice?e.promotionPrice:e.price});$("#totalAmountCart").text(i.toLocaleString("vi",{style:"currency",currency:"VND"}));t!==""&&$("#table-cart-content").html(t)}})}this.initialize=function(){n();i()}};