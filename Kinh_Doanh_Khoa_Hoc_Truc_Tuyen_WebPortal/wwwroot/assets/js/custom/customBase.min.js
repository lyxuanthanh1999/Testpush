var BaseAjax=function(){function i(){$("body").on("click",".remove-product-in-cart",function(t){t.preventDefault();var i=$(this).data("id");$.ajax({url:"/Cart/RemoveFromCart",type:"post",data:{courseId:i},success:function(){n();location.pathname==="/cart.html"&&location.reload()}})});$("body").on("click",".add-product-in-cart",function(t){var i,r;if(t.preventDefault(),i=parseInt($(this).data("status")),i===1)r=parseInt($(this).data("id")),$.ajax({url:"/Cart/AddToCart",type:"post",data:{courseId:r},success:function(t){var r=$("#template-modal-cart").html(),i="";i+=Mustache.render(r,{checkPromotion:t.promotionPrice?!0:!1,modalCartImage:"https://localhost:44342"+t.courseViewModel.image,modalCartName:t.courseViewModel.name,modalOwnerUser:t.courseViewModel.createdName,modalCartPrice:t.price.toLocaleString("vi",{style:"currency",currency:"VND"}),modalCartPromotion:t.promotionPrice?t.promotionPrice.toLocaleString("vi",{style:"currency",currency:"VND"}):0..toLocaleString("vi",{style:"currency",currency:"VND"})});$("#modal-add-to-cart").html(i);n()},error:function(){return $("#modal-add-to-cart").html('<div class="description-title" style="text-align: justify;font-size: 16px;font-weight: 600">Sản phẩm này đã có trong giỏ hàng<\/div>'),!1}});else return i===2?($("#modal-add-to-cart").html('<div class="description-title" style="text-align: justify;font-size: 16px;font-weight: 600">Khóa học này chưa phát hành<\/div>'),!1):($("#modal-add-to-cart").html('<div class="description-title" style="text-align: justify;font-size: 16px;font-weight: 600">Khóa học này đã ngừng kình doanh<\/div>'),!1)});$("#main-search").autocomplete({minLength:0,source:function(n,t){$.ajax({url:"/Courses/GetCoursesByFilter",type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",data:{filter:n.term},success:function(n){t(n)}})},focus:function(n,t){return $("#main-search").val(t.item.label),!1},select:function(n,t){return $("#main-search").val(t.item.label),!1}});$("body").on("click",".checkRead",function(n){n.preventDefault();var i=$(this).data("id");$.ajax({type:"POST",url:"/Account/MarkAsRead",data:{announceId:i},dataType:"json",success:function(){t()},error:function(){console.log("Có lỗi xảy ra")}})})}function n(){$("#headerCart").load("/Home/RefreshCart")}function t(){$.ajax({url:"/Account/GetAnnouncements",type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var i=$("#announcement-template").html(),t="",r="https://localhost:44342";console.log(n.items);n.totalRecords>0?($.each(n.items,function(n,u){t+=Mustache.render(i,{Content:u.content,Id:u.id,Title:u.title,Image:r+u.image,CreationTime:moment(u.creationTime).fromNow()})}),t+=$("#announcement-tag-template").html(),$("#totalAnnouncement").text(n.totalRecords),t!==""&&$("#announcementList").html(t)):($("#totalAnnouncement").text(0),t+='<li style="text-align: center; align-items: center;"><span class="description-title u-c-silver" style="text-align:center;align-items: center; line-height: 1.9; text-align: justify; font-size: 12px; font-weight: 600">Không có thông báo chưa đọc<\/span><\/li>',t+=$("#announcement-tag-template").html(),$("#announcementList").html(t))},error:function(){console.log("Có lỗi xảy ra")}})}this.initialize=function(){t();i()}};