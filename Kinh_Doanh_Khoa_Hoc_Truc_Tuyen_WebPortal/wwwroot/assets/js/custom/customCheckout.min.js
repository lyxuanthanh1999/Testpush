var CheckoutAjax=function(){function n(){$("#cash-on-delivery").on("change",function(n){if(n.preventDefault(),this.checked){$("#check-payment-info").show("slow");var t=$("#hid_current_login_id").val();t!==""&&$.ajax({type:"GET",url:"/Cart/GetUserById",data:{id:t},contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){$("#billing-name").val(n.name);$("#billing-phone").val(n.phoneNumber);$("#billing-email").val(n.email)}})}});$("#payment-gateway").on("change",function(n){n.preventDefault();this.checked&&$("#check-payment-info").hide("slow")});$("#btnCheckout").click(function(){var u=$("#hid_current_login_id").val(),n=$("#billing-name").val(),t=$("#billing-phone").val(),i=$("#billing-street").val(),f=$("#order-note").val(),r=$("#billing-email").val(),e=$("#payment-gateway").is(":checked");e?u!==""?$.ajax({type:"GET",url:"/Cart/CheckoutForPayment",success:function(n){return n.code==="00"?(window.vnpay?vnpay.open({width:480,height:600,url:n.data}):location.href=n.data,!1):!1}}):window.location.href="/login.html":t.length<1?$("#billing-phone-message").show():n.length<1?$("#billing-name-message").show():i.length<1?$("#billing-address-message").show():r.length<1?$("#billing-email-message").show():($("#billing-phone-message").hide(),$("#billing-name-message").hide(),$("#billing-address-message").hide(),$.ajax({type:"POST",url:"/Cart/CheckoutForDelivery",data:{Name:n,PhoneNumber:t,Address:i,Message:f,PaymentMethod:0,Email:r},success:function(){window.location.href="/checkout-confirm.html?message=Thanh toán thành công"},error:function(){window.location.href="/checkout-confirm.html?message=Có lỗi xảy ra trong quá trình xử lý"}}))})}function t(){$("#cash-on-delivery").checked?$("#check-payment-info").show():$("#check-payment-info").hide()}this.initialize=function(){t();n()}};